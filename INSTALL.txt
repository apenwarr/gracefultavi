Feedback
--------

Your feedback is welcome to help make these installation instructions more
useful, understandable, and complete.  If you have any suggestions, criticisms,
questions, or other comments, please visit the home of GracefulTavi on the Web:
http://open.nit.ca/wiki/?GracefulTavi.


Upgrade Notes
-------------

1.  Backup your database. When upgrading from a previous version of
    GracefulTavi, it is strongly recommended to do a full backup of your wiki
    database. GracefulTavi now includes an automated script that will smoothly
    upgrade your database from any old format. It has been tested against all
    previous versions of GracefulTavi with no trouble, but this is just a
    precaution. If anything wrong was to happen to your data during the
    automated upgrade process, please let us know.

2.  Because GracefulTavi is highly customizable, it is necessary sometimes that
    some upgrade tasks must be performed manually. Visit our web site
    http://open.nit.ca/wiki/?GracefulTavi and see each Release Notes from the
    version you are currently using to the one you're upgrading to. See the
    section MANUAL UPGRADE in each Release Notes to learn about any new
    configuration changes that you must perform manually.


GracefulTavi - Installation
---------------------------

1.  Choose a location in which to install GracefulTavi.  You do not need to
    install GracefulTavi under your webspace; in fact, it is recommended that
    you do not do so.  This is best for security purposes to leave as few
    scripts exposed to the web as possible.

    Additionally, if you install GracefulTavi in a central location, you can use
    it once for multiple wikis on your web server.  This makes administration of
    virtual hosts or wiki farms much simpler.  Upgrading to a later version of
    GracefulTavi also is simplified, as you can upgrade multiple wikis in one
    step.

    For the sake of example, the following assumes that you have chosen to
    install GracefulTavi in the following directory:

      /usr/local/lib/gracefultavi/

    Alternatively, you can install GracefulTavi directly in your webspace and
    use it without complication; there is no reason that GracefulTavi *must* be
    installed in a central location, although it is recommended.

2.  Download the GracefulTavi archive into the installation directory.  You can
    find it at http://open.nit.ca/wiki/index.php?page=DownloadReleases

3.  Unpack the archive in the installation directory.

4.  Run install/create-db.pl to create the database tables for your wiki:

    Its first parameter should be the name of the (already created) MySQL
    database where the tables will be created.  If you have not yet created the
    database, you should do so before running the script.

    Its second and third parameters are the user name and password to use to
    access the database.

    Optionally, you can include a fourth parameter to specify a prefix to be
    prepended to the table names.  If you have access to only one MySQL
    database, you can use this feature to install multiple wikis in the same
    database.

    You may also include a fifth parameter to specify the hostname or IP address
    of the database server, if it is not the local host.

    Examples:

      perl ./create-db.pl wiki joe passwd
      perl ./create-db.pl project sally pass wiki_ database.example.com
      perl ./create-db.pl common jim key "" mysql.example.com

5.  In the install/ directory, run the "configure.pl" script to generate a
    configuration file for your wiki.  It takes one parameter, the location of
    the configuration file.  For example:

      perl ./configure.pl /home/u/user12/gracefultavi/config.php
      perl ./configure.pl ../config.php

    You will be prompted for such things as the URL to the wiki script, the name
    of your wiki, database information, etc.

    As with the GracefulTavi source, it is recommended that you keep your
    configuration file in a location that cannot be accessed from the web.

    You may wish to double-check the 'config.php' file that was created by the
    configuration script, to make sure that the settings are correct.

6.  If you installed GracefulTavi in your webspace, then skip this step, since
    index.php is already accessible from the web.

    A. Now you have to create an entry point to your wiki.  Choose a directory
       in your webspace to be the base point for your wiki.  For sake of
       example, we will use /home/joe/public_html/mywiki/.

    B. Create a subdirectory named 'admin/' in this directory.  E.g.,
       /home/joe/public_html/mywiki/admin.

    C. In the base directory, create a symbolic link to the index.php in the
       GracefulTavi installation.  For example, create
       /home/joe/public_html/mywiki/index.php that is a link to
       /usr/local/lib/gracefultavi/index.php.

    D. In the admin/ subdirectory, create a symbolic link to the index.php in
       the admin subdirectory in the GracefulTavi installation.  For example,
       create: /home/joe/public_html/mywiki/admin/index.php that is a link to
       /usr/local/lib/gracefultavi/admin/index.php.

7.  Configure your script so that it can access the GracefulTavi scripts and so
    that it can access your configuration file.  If you have installed
    GracefulTavi in your webspace, and you have placed the config.php file in
    the root of that location, then you can skip this step.  Otherwise,
    continue:

    A. Locate the directories for your GracefulTavi installation and for your
       config.php file.  For example, they might be:

         /usr/local/lib/gracefultavi/
         /home/joe/gracefultavi/mywiki

    B. If you are running PHP as mod_php under Apache, add the directories to
       the .htaccess file in the directory where the wiki resides.  Separate
       them with colons:

      php_value include_path "/home/joe/tavi/mywiki:/usr/local/lib/gracefultavi"

    C. If, instead, you are running PHP as a CGI program, then you will have to
       similarly change the include_path in your php.ini file to point to the
       given directories.

8.  [Optional, but recommended.]

    Turn off register_globals for GracefulTavi. This is generally a good idea to
    make your scripts less liable to undiscovered exploits.

    A. If you are running PHP as mod_php under Apache, add the following line to
       the .htaccess file in the directory where the wiki resides:

         php_flag register_globals off

    B. If, instead, you are running PHP as a CGI program, then you will have to
       similarly change the register_globals setting in your php.ini file.

9. Visit your wiki and start creating pages!
